<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Voz Segura — Registrar denuncia</title>

    <link rel="stylesheet" th:href="@{/css/main.css?v=2}" href="/css/main.css?v=2"/>
</head>

<body class="vs-app">

<a class="vs-sr-only" href="#contenido">Saltar al contenido</a>

<header class="vs-header">
    <div class="vs-container vs-container-wide">
        <a class="vs-brand" th:href="@{/}" href="/" aria-label="Ir al inicio de Voz Segura">
            <img class="vs-brand__logo"
                 th:src="@{/img/logo-voz-segura.svg?v=2}"
                 src="/img/logo-voz-segura.svg?v=2"
                 alt="Logo de Voz Segura">
            <div class="vs-brand__text">
                <div class="vs-brand__title">Voz Segura</div>
                <div class="vs-brand__subtitle">Registrar denuncia</div>
            </div>
        </a>
    </div>
</header>

<main id="contenido" class="vs-container vs-container-wide">

    <!-- Progreso -->
    <nav class="vs-progress" aria-label="Progreso">
        <ol class="vs-progress__steps">
            <li class="vs-progress__step completed" aria-label="Paso 1 completado: Verificación">
                <div class="vs-progress__step-circle">1</div>
                <span class="vs-progress__step-label">Verificación</span>
            </li>
            <li class="vs-progress__step completed" aria-label="Paso 2 completado: Biométrica">
                <div class="vs-progress__step-circle">2</div>
                <span class="vs-progress__step-label">Biométrica</span>
            </li>
            <li class="vs-progress__step active" aria-current="step" aria-label="Paso 3 actual: Denuncia">
                <div class="vs-progress__step-circle">3</div>
                <span class="vs-progress__step-label">Denuncia</span>
            </li>
            <li class="vs-progress__step" aria-label="Paso 4: Confirmación">
                <div class="vs-progress__step-circle">4</div>
                <span class="vs-progress__step-label">Confirmación</span>
            </li>
        </ol>
    </nav>

    <section class="vs-card" aria-labelledby="titulo-denuncia">

        <div class="vs-card__header">
            <h1 id="titulo-denuncia" class="vs-card__title">Registrar denuncia</h1>
            <p class="vs-card__subtitle">Completa los datos del caso con calma. Mientras más claro, mejor.</p>
        </div>

        <!-- Errores UI (sin alert) -->
        <div id="formError" class="vs-alert vs-alert--error vs-mb-4 vs-hidden" role="alert">
            Revisa los campos marcados antes de enviar.
        </div>

        <form th:action="@{/denuncia/submit}"
              method="post"
              enctype="multipart/form-data"
              th:object="${complaintForm}"
              class="vs-form"
              id="complaintForm"
              novalidate>

            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

            <!-- 1) Descripción -->
            <div class="vs-section">
                <div class="vs-section__title">Descripción del incidente</div>

                <div class="vs-form__group">
                    <label class="vs-form__label vs-form__label--required" for="detail">
                        ¿Qué ocurrió?
                    </label>

                    <textarea th:field="*{detail}"
                              id="detail"
                              class="vs-textarea"
                              required
                              minlength="50"
                              rows="7"
                              aria-describedby="detailHelp detailCount detailError"></textarea>

                    <div class="vs-form__help" id="detailHelp">
                        Escribe al menos 50 caracteres. Incluye fechas aproximadas, lugares y personas involucradas si aplica.
                    </div>

                    <div class="vs-form__help vs-muted-row">
                        <span id="detailCount">0/50</span>
                    </div>

                    <div id="detailError" class="vs-form__error vs-hidden" role="alert">
                        Describe el incidente con al menos 50 caracteres.
                    </div>
                </div>
            </div>

            <!-- 2) Empresa -->
            <div class="vs-section">
                <div class="vs-section__title">Información de la empresa</div>

                <div class="vs-grid vs-grid--2cols">
                    <div class="vs-form__group">
                        <label class="vs-form__label vs-form__label--required" for="companyName">Nombre de la empresa</label>
                        <input type="text"
                               th:field="*{companyName}"
                               id="companyName"
                               class="vs-input"
                               required
                               autocomplete="off"/>
                    </div>

                    <div class="vs-form__group">
                        <label class="vs-form__label vs-form__label--required" for="companyContact">Contacto (correo o teléfono)</label>
                        <input type="text"
                               th:field="*{companyContact}"
                               id="companyContact"
                               class="vs-input"
                               required
                               autocomplete="off"
                               aria-describedby="contactHelp"/>
                        <div id="contactHelp" class="vs-form__help">
                            Puede ser un correo o un número. Si no lo tienes exacto, coloca el que conozcas.
                        </div>
                    </div>
                </div>

                <div class="vs-form__group">
                    <label class="vs-form__label vs-form__label--required" for="companyAddress">Dirección</label>
                    <input type="text"
                           th:field="*{companyAddress}"
                           id="companyAddress"
                           class="vs-input"
                           required
                           autocomplete="off"/>
                </div>
            </div>

            <!-- 3) Evidencias -->
            <div class="vs-section">
                <div class="vs-section__title">Evidencias (opcional)</div>

                <div class="vs-form__group">
                    <label class="vs-form__label" for="evidences">Adjunta archivos si los tienes</label>

                    <div class="vs-file-upload">
                        <input type="file"
                               th:field="*{evidences}"
                               id="evidences"
                               class="vs-file-upload__input"
                               accept="image/*,video/*,.pdf,.doc,.docx"
                               multiple
                               aria-describedby="filesHelp filesError"/>
                        <label for="evidences" class="vs-file-upload__label">
                            <span>Adjuntar archivos</span>
                        </label>
                    </div>

                    <div id="filesHelp" class="vs-form__help">
                        Máximo 5 archivos. Máximo 25MB por archivo.
                    </div>

                    <div id="filesError" class="vs-form__error vs-hidden" role="alert">
                        Revisa el número de archivos y el tamaño permitido.
                    </div>

                    <div id="fileList" class="vs-file-list" aria-label="Lista de archivos seleccionados"></div>
                </div>

                <div class="vs-alert vs-alert--info">
                    Consejo: evita incluir datos personales innecesarios si no aportan al caso.
                </div>
            </div>

            <!-- Botones -->
            <div class="vs-button-group vs-button-group--space-between">
                <button type="button" class="vs-button vs-button--ghost" data-go-back>
                    Volver
                </button>

                <button type="submit" class="vs-button vs-button--primary vs-button--lg">
                    Enviar denuncia
                </button>
            </div>

        </form>

    </section>

</main>

<script th:src="@{/js/complaint.js}" src="/js/complaint.js"></script>

</body>
</html>



